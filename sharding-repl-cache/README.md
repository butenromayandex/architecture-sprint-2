# sharding-repl-cache

### Что реализовано

- Реализовано шардирование по примеру из урока.
- Реализовано по 2 репликации для каждого из шардов.
- Добавлено кешироваие Redis Cluster.

## Как запустить

Неоходимо некоторые скрипты сделать исполняемым.
Для этого выполните команды ниже

```shell
chmod +x ./init.sh
chmod +x ./check-redis-cache.sh
chmod +x ./check-shards-and-replicas.sh
chmod +x ./scripts/redis-cache-init.sh
```

И запустить инициализацию

```shell
./init.sh
```

Для остановки проекта

```shell
docker compose stop
```

Запустить проект

```shell
docker compose up -d
```

## Как проверить

Команда, которая выполняет подсчёт документов в шардах и репликах и общее кол-во документов.

```shell
./check-shards-and-replicas.sh
```

Команда, которая покажет скорость выполнения запросов без кеширования и с использованием Redis Cache Cluster.

```shell
./check-redis-cache.sh
```

### Если вы запускаете проект на локальной машине

Откройте в браузере http://localhost:8080

### Если вы запускаете проект на предоставленной виртуальной машине

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```

Откройте в браузере http://<ip виртуальной машины>:8080

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://<ip виртуальной машины>:8080/docs
